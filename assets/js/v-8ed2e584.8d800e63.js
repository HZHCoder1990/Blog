"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6496],{5619:(e,a,n)=>{n.r(a),n.d(a,{data:()=>s});const s={key:"v-8ed2e584",path:"/iOS/security.html",title:"",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[],filePathRelative:"iOS/security.md",git:{updatedTime:1633942617e3,contributors:[{name:"peak",email:"peak@jiemogame.com",commits:1}]}}},2257:(e,a,n)=>{n.r(a),n.d(a,{default:()=>c});var s=n(6252);const i=(0,s.uE)('<blockquote><p>总结了一波iOS出包相关的命令行，内容如下：</p></blockquote><h5 id="_1-解锁钥匙串" tabindex="-1"><a class="header-anchor" href="#_1-解锁钥匙串" aria-hidden="true">#</a> 1.解锁钥匙串</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>security unlock-keychain -p `mac_password` /Users/xx/Library/Keychains/login.keychain\n\nmac_password 表示mac电脑开机密码\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_2-安装p12文件" tabindex="-1"><a class="header-anchor" href="#_2-安装p12文件" aria-hidden="true">#</a> 2.安装p12文件</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>security import `p12_filepath` -k /Users/xx/Library/Keychains/login.keychain -P `p12_password` -T /usr/bin/codesign\n\np12_filepath 表示p12文件路径\np12_password 表示p12文件密码\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_3-从p12文件提取证书名称" tabindex="-1"><a class="header-anchor" href="#_3-从p12文件提取证书名称" aria-hidden="true">#</a> 3.从p12文件提取证书名称</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>openssl pkcs12 -password pass:&quot;p12_password&quot; -in `p12_filepath`  -nodes  2&gt;&amp;1 | grep friendlyName  | head -n 2 | sed &#39;s/friendlyName://g&#39; | grep -o &quot;[^ ]\\+\\( \\+[^ ]\\+\\)*&quot;\n\np12_filepath 表示p12文件路径\np12_password 表示p12文件密码\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_4-查看电脑上有多少可供签名使用的证书" tabindex="-1"><a class="header-anchor" href="#_4-查看电脑上有多少可供签名使用的证书" aria-hidden="true">#</a> 4.查看电脑上有多少可供签名使用的证书</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>security find-identity -v -p codesigning\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>搜索 REVOKED 关键字来判断证书是否被撤销</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ security find-identity -v -p codesigning | grep REVOKED\n12) BC94E9400C1F7A96101475CE6D3603C8FF5C561F &quot;iPhone Developer: Guo Qun Wan (5N6XPS8SJT)&quot; (CSSMERR_TP_CERT_REVOKED)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_5-截取证书名称" tabindex="-1"><a class="header-anchor" href="#_5-截取证书名称" aria-hidden="true">#</a> 5.截取证书名称:</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>security find-identity -v -p codesigning | cut -d \\&quot; -f2\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h5 id="_6-对一个未经过签名的-app-文件进行签名" tabindex="-1"><a class="header-anchor" href="#_6-对一个未经过签名的-app-文件进行签名" aria-hidden="true">#</a> 6.对一个未经过签名的 .app 文件进行签名</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>codesign -s  ‘iPhone Developer: xxxxx’   **.app\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h5 id="_7-对一个已经签名过的-app-文件进行重签名" tabindex="-1"><a class="header-anchor" href="#_7-对一个已经签名过的-app-文件进行重签名" aria-hidden="true">#</a> 7.对一个已经签名过的 .app 文件进行重签名</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>codesign -f -s ‘iPhone Developer:xxxx’  **.app\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h5 id="_8-查看一个-app-文件的签名信息" tabindex="-1"><a class="header-anchor" href="#_8-查看一个-app-文件的签名信息" aria-hidden="true">#</a> 8.查看一个 .app 文件的签名信息</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>codesign  -vv -d  **.app\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h5 id="_9-检查一个-app-文件-的签名是否被破坏" tabindex="-1"><a class="header-anchor" href="#_9-检查一个-app-文件-的签名是否被破坏" aria-hidden="true">#</a> 9.检查一个 .app 文件 的签名是否被破坏</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>codisign  --verify **.app\n\n如果未被破坏，输出为空；否则输出错误原因\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_10-查看配置文件信息" tabindex="-1"><a class="header-anchor" href="#_10-查看配置文件信息" aria-hidden="true">#</a> 10.查看配置文件信息</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>security cms -D -i example.mobileprovision\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h4>',24),r={href:"https://www.objc.io/issues/17-security/inside-code-signing/",target:"_blank",rel:"noopener noreferrer"},l=(0,s.Uk)("code sign"),d={href:"http://www.cnblogs.com/pixy/p/4817579.html",target:"_blank",rel:"noopener noreferrer"},t=(0,s.Uk)("security 命令总结"),p={},c=(0,n(3744).Z)(p,[["render",function(e,a){const n=(0,s.up)("OutboundLink");return(0,s.wg)(),(0,s.iD)(s.HY,null,[i,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s._)("a",r,[l,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",d,[t,(0,s.Wm)(n)])])])],64)}]])},3744:(e,a)=>{a.Z=(e,a)=>{for(const[n,s]of a)e[n]=s;return e}}}]);